!function(e){e.fn.SelectorWheel=function(t){function n(){function t(e,t){return function(n){var a=n.deltaY;s.scrollOneInt(e,e.html(),t,a)}}if(u.prepare(),s.configure(),s.optionsCheck(),o.eachSymbol)if("int"==s.valueType){var n=0;e(".symbol",l).each(function(){var a=e(this);i.cells[n++]=parseInt(a.html()),e(this).on("mousewheel",t(a,n))});{o.changeSign?e(e(".symbol",l)[0]).on("click",s.changeSign):void 0}}else e(".symbol",l).each(function(){var t=e(this);e(this).on("mousewheel",function(e){s.scrollNextLetter(t,e.deltaY)})});else l.on("mousewheel",s.scrollAll);o.hiddenInput.enabled?s.setHiddenInput(o.hiddenInput.id,o.hiddenInput.name):null}var a,l=this,o=e.extend({value:void 0===l.attr("value")?0:parseInt(l.attr("value")),symCount:void 0===l.attr("length")?3:parseInt(l.attr("length")),valueFrom:void 0===l.attr("valueFrom")?0:l.attr("valueFrom"),valueTo:void 0===l.attr("valueTo")?999:l.attr("valueTo"),changeSign:!1,sensetivity:1,capture:!0,eachSymbol:!0,type:"int-10",alphabet:"abcdefghijklmnopqrstuvwxyz",hiddenInput:{enabled:!1}},t),i={getValueFromLetter:function(e){return s.alphabet.indexOf(e)>=0?s.alphabet.indexOf(e):-1},getNextValue:function(e,t,n){var a=n.indexOf(e.toString()),l=(a+t)%n.length<0?n.length+(a+t):(a+t)%n.length;return n.charAt(l)},getNextLetter:function(e,t){var n=s.alphabet,a=n.length,l=e+t;return n.charAt(0>l?a+l:0==l?0:l%a)},cells:[]},s={value:o.value,valueType:o.type,alphabet:o.alphabet,base:o.alphabet.length-2,sign:1,getSymbolDifference:function(e){return o.symCount-s.value.toString(e).length},customSymbol:function(e){var t=s.getSymbolDifference(s.base);for(e=e.toString(s.base);t-->0;)e="0"+e;return e},changeSign:function(){s.sign<0?(e(this).html(s.stack),s.value*=s.sign,0!=s.stack&&(s.value+=s.stack*Math.pow(s.base,o.symCount-1))):(e(this).html("-"),s.stack=parseInt(i.cells[0]),s.stack&&(s.value-=s.stack*Math.pow(s.base,o.symCount-1)),i.cells[0]=0),s.sign*=-1,s.value*=s.sign;o.hiddenInput.enabled?s.hiddenInput.trigger({type:"change",val:s.value}):null;console.log(s.value)},setMask:function(t){for(var n=s.customSymbol(parseInt(t,s.base)),a=0;a<o.symCount;a++)e(e(".symbol",l)[a]).html(n.charAt(a)),o.eachSymbol&&(i.cells[a]=parseInt(n.charAt(a)))},setHiddenInput:function(e,t){l.after("<input type='hidden' id='"+e+"' name='"+t+"' value='"+s.value+"'>"),s.hiddenInput=l.next(),s.hiddenInput.on("change",function(e){s.hiddenInput.attr("value",e.val)})},configure:function(){var e="";if(0==o.type.indexOf("int")){for(var t=parseInt(o.type.substr(-2)),n=0;t>n;n++)e+=n.toString(t);s.valueType="int",s.alphabet=e,s.base=s.alphabet.length,s.min=parseInt(o.valueFrom,s.base),s.max=parseInt(o.valueTo,s.base),console.log(e)}else if(s.alphabet=o.alphabet,"string"!==o.type)throw"Invalid value type: "+o.type},optionsCheck:function(){if(o.value.length>o.symCount)throw"Initial value's symbol lenght is more than symbols count";if(o.eachSymbol){if(o.changeSign&&"int"!=s.valueType)throw"You can't use option changeSign with non-integer value type";if(o.changeSign&&s.min>=0)throw"You can't use options changeSign with option valueFrom that less than zero (there is no point to do it)"}else if("int"!=s.valueType)throw"You can't use options eachSymbol=false with type that is not integer"}},u={graphics:{},drawShadow:function(t){"-up"==t?(l.append("<div class='shadow shadow-up'></div>"),u.graphics.shadowUp=e(".shadow-up",l)):"-down"==t?(l.append("<div class='shadow shadow-down'></div>"),u.graphics.shadowDown=e(".shadow-down",l)):(u.positioning(),e(window).resize(u.positioning))},positioning:function(){u.graphics.shadowUp.css("width",l.width()-1),u.graphics.shadowUp.css("top",l.position().top-8),u.graphics.shadowDown.css("width",l.width()-1),u.graphics.shadowDown.css("top",l.position().top+34)},prepare:function(){u.drawShadow("-up"),l.append("<div class='spanblock'></div>"),a=e(".spanblock",l);for(var t=s.customSymbol(s.value),n=0;n<o.symCount;n++)a.append("<span class='symbol'>"+t.charAt(n)+"</span>");u.drawShadow("-down"),u.drawShadow()}};return s.scrollOneInt=function(e,t,n,a){var l=i.getNextValue(t,a,s.alphabet),u=0,h=s.min,r=s.max;i.cells[n-1]=i.getValueFromLetter(l);for(var c=0,p=i.cells.length;p>c;c++)u+=Math.pow(s.base,o.symCount-c-1)*i.cells[c];u*=s.sign,r>=u&&u>=h?(s.value=u,e.html(l)):(h>=u?s.value=h:u>=r&&(s.value=r),s.setMask(s.value.toString(s.base)));o.hiddenInput.enabled?s.hiddenInput.trigger({type:"change",val:s.value}):null;console.log(s.value)},s.scrollAll=function(e){var t=s.value+e.deltaY*o.sensetivity,n=s.min,a=s.max;a>=t&&t>=n?s.value=t:n>=t?s.value=n:t>=a&&(s.value=a),s.setMask(s.value.toString(s.base));o.hiddenInput.enabled?s.hiddenInput.trigger({type:"change",val:s.value}):null;console.log(s.value)},s.scrollNextLetter=function(t,n){var a=t.html();t.html(i.getNextLetter(i.getValueFromLetter(a),n,s.alphabet));var u="";e(".symbol",l).each(function(){u+=e(this).html()}),s.value=u;o.hiddenInput.enabled?s.hiddenInput.trigger({type:"change",val:s.value}):null;console.log(s.value)},n(),this}}(jQuery);