!function(e){e.fn.jqSelectorWheel=function(t){function n(){if(i.prepare(),o.configure(),a.optionsCheck(),l.eachSymbol)if("int"==o.valueType){var t=0;e(".symbol",a).each(function(){var n=e(this);a.cells[t++]=parseInt(n.html()),e(this).on("mousewheel",o.bindEventsEachSymbol(n,t))});{l.changeSign?e(e(".symbol",a)[0]).on("click",o.changeSign):void 0}}else e(".symbol",a).each(function(){var t=e(this);e(this).on("mousewheel",function(e){o.scrollNextLetter(t,e.deltaY)})});else a.on("mousewheel",o.scrollAll);l.scrollBlock?o.setScrollBlock():null,l.hiddenInput.enabled?o.setHiddenInput(l.hiddenInput.id,l.hiddenInput.name):null}var a=this,l=e.extend({value:void 0===a.attr("value")?0:parseInt(a.attr("value")),valueLength:void 0===a.attr("length")?3:parseInt(a.attr("length")),valueFrom:void 0===a.attr("valueFrom")?0:a.attr("valueFrom"),valueTo:void 0===a.attr("valueTo")?999:a.attr("valueTo"),changeSign:!1,sensetivity:1,scrollBlock:!0,eachSymbol:!0,type:"int-10",alphabet:"0123456789",hiddenInput:{enabled:!1}},t);this.getValueFromLetter=function(e,t){return t.indexOf(e)>=0?t.indexOf(e):-1},this.getNextValue=function(e,t,n){var a=n.indexOf(e.toString()),l=(a+t)%n.length<0?n.length+(a+t):(a+t)%n.length;return n.charAt(l)},this.getNextLetter=function(e,t){var n=o.alphabet,a=n.length,l=e+t;return n.charAt(0>l?a+l:l%a)},this.optionsCheck=function(){if(l.value.length>l.valueLength)throw"Error: Initial value's symbol lenght is more than symbols count";if(l.eachSymbol){if(l.changeSign&&"int"!=o.valueType)throw"Error: You can't use option changeSign with non-integer value type";if(l.changeSign&&o.min>=0)throw"Error: You can't use options changeSign with option valueFrom that less than zero (there is no point to do it)"}else if("int"!=o.valueType)throw"Error: You can't use options eachSymbol=false with type that is not integer"},this.cells=[];var o={value:l.value,valueType:l.type,alphabet:l.alphabet,base:l.alphabet.length,sign:1};o.getSymbolDifference=function(e){return l.valueLength-o.value.toString(e).length},o.customSymbol=function(e){var t=o.getSymbolDifference(o.base);for(e=e.toString(o.base);t-->0;)e="0"+e;return e},o.changeSign=function(){o.sign<0?(e(this).html(o.stack),o.value*=o.sign,0!=o.stack&&(o.value+=o.stack*Math.pow(o.base,l.valueLength-1))):(e(this).html("-"),o.stack=parseInt(a.cells[0]),o.stack&&(o.value-=o.stack*Math.pow(o.base,l.valueLength-1)),a.cells[0]=0),o.sign*=-1,o.value*=o.sign;l.hiddenInput.enabled?o.hiddenInput.trigger({type:"change",val:o.value}):null},o.setMask=function(t){for(var n=o.customSymbol(parseInt(t,o.base)),i=0;i<l.valueLength;i++)e(e(".symbol",a)[i]).html(n.charAt(i)),l.eachSymbol&&(a.cells[i]=parseInt(n.charAt(i)))},o.setHiddenInput=function(e,t){a.after("<input type='hidden' id='"+e+"' name='"+t+"' value='"+o.value+"'>"),o.hiddenInput=a.next(),o.hiddenInput.on("change",function(e){o.hiddenInput.attr("value",e.val)})},o.setScrollBlock=function(){e("body").on({mousewheel:function(e){e.target.parentNode.parentNode.id==a[0].id&&(e.preventDefault(),e.stopPropagation())}})},o.configure=function(){var e="";if(0==l.type.indexOf("int")){for(var t=parseInt(l.type.substr(-2)),n=0;t>n;n++)e+=n.toString(t);o.valueType="int",o.alphabet=e,o.base=o.alphabet.length,o.min=parseInt(l.valueFrom,o.base),o.max=parseInt(l.valueTo,o.base)}else if(o.alphabet=l.alphabet,"string"!==l.type)throw"Invalid value type: "+l.type},o.bindEventsEachSymbol=function(e,t){return function(n){o.scrollOneInt(e,e.html(),t,n.deltaY)}},o.scrollOneInt=function(e,t,n,i){var s=a.getNextValue(t,i,o.alphabet),r=0,h=o.min,u=o.max;a.cells[n-1]=a.getValueFromLetter(s,o.alphabet);for(var c=0,p=a.cells.length;p>c;c++)r+=Math.pow(o.base,l.valueLength-c-1)*a.cells[c];r*=o.sign,u>=r&&r>=h?(o.value=r,e.html(s)):(o.value=h>=r?h:u,o.setMask(o.value.toString(o.base)));l.hiddenInput.enabled?o.hiddenInput.trigger({type:"change",val:o.value}):null},o.scrollAll=function(e){var t=o.value+e.deltaY*l.sensetivity,n=o.min,a=o.max;o.value=a>=t&&t>=n?t:n>=full?n:a,o.setMask(o.value.toString(o.base));l.hiddenInput.enabled?o.hiddenInput.trigger({type:"change",val:o.value}):null},o.scrollNextLetter=function(t,n){var i=t.html();t.html(a.getNextLetter(a.getValueFromLetter(i,o.alphabet),n,o.alphabet));var s="";e(".symbol",a).each(function(){s+=e(this).html()}),o.value=s;l.hiddenInput.enabled?o.hiddenInput.trigger({type:"change",val:o.value}):null};var i={graphics:{},drawShadow:function(t){"-up"==t?(a.append("<div class='shadow shadow-up'></div>"),i.graphics.shadowUp=e(".shadow-up",a)):"-down"==t?(a.append("<div class='shadow shadow-down'></div>"),i.graphics.shadowDown=e(".shadow-down",a)):(i.positioning(),e(window).resize(i.positioning))},positioning:function(){i.graphics.shadowUp.css("width",a.width()-1),i.graphics.shadowUp.css("top",a.position().top-8),i.graphics.shadowDown.css("width",a.width()-1),i.graphics.shadowDown.css("top",a.position().top+34)},prepare:function(){i.drawShadow("-up"),a.append("<div class='spanblock'></div>");for(var t=e(".spanblock",a),n=o.customSymbol(o.value),s=0;s<l.valueLength;s++)t.append("<span class='symbol'>"+n.charAt(s)+"</span>");i.drawShadow("-down"),i.drawShadow()}};return n(),this}}(jQuery);